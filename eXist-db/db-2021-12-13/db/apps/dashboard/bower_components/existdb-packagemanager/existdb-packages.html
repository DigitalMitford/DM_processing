<?xml version="1.0" encoding="UTF-8"?>
<html><head/><body><dom-module id="existdb-packages"><template><style>body{margin:0;padding:0;}:host{position:relative;background:whitesmoke;margin:0;padding:0;height:100%;width:100%;--paper-icon-button:{color:var(--paper-blue-300);};}#localItemList{padding:10px;margin:0;background:whitesmoke;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;}@media only screen and (max-width: 768px){#localItemList{display:block;}}::slotted(repo-packages){display:block;width:100%;}paper-progress.paper-progress{width:100%;display:block;margin-top:-2px;flex-grow:5;--paper-progress-active-color:var(--paper-blue-500);--paper-progress-height:5px;}[hidden]{display:none;}.spin-wrapper{position:relative;width:100%;text-align:center;height:1px;z-index:10;top:20px;}paper-spinner{padding:10px;background:var(--paper-grey-200);border-radius:24px;box-shadow:0 4px 5px 0 rgba(0, 0, 0, 0.14),
                0 1px 10px 0 rgba(0, 0, 0, 0.12),
                0 2px 4px -1px rgba(0, 0, 0, 0.4);}</style><iron-ajax id="loadPackages" verbose="" with-credentials="" method="get" handle-as="text" on-response="_handlePackages" on-error="_handleLocalError"/><div class="spin-wrapper" id="spinner"><paper-spinner active=""/></div><div id="localItemList" class="items" type="packagemanager"><slot/></div></template><script>class ExistdbPackages extends Polymer.Element{static get is(){return"existdb-packages"}static get properties(){return{url:{type:String,reflectToAttribute:!0},service:{type:String,reflectToAttribute:!0},autoLoad:{type:Boolean,value:!1},count:{type:Number,value:0,notify:!0,reflectToAttribute:!0,observer:"_handleCount"}}}constructor(){super()}connectedCallback(){super.connectedCallback()}ready(){super.ready();if(this.autoLoad){this.loadPackages()}window.addEventListener("package-removed",function(){this.loadPackages()}.bind(this));window.addEventListener("package-installed",function(e){console.log("package-installed ",e);this.loadPackages()}.bind(this))}getPackages(){return this.packages}_handlePackages(){this.$.localItemList.innerHTML=this.$.loadPackages.lastResponse;this.packages=this.shadowRoot.querySelectorAll("repo-app");this.count=this.packages.length;this.dispatchEvent(new CustomEvent("packages-loaded",{bubbles:!0,composed:!0,detail:{type:this.id}}));this._hideSpinner()}_handleLocalError(){this._hideSpinner();this.dispatchEvent(new CustomEvent("packages-load-error",{bubbles:!0,composed:!0,detail:{error:"loading of available packages failed"}}))}loadPackages(){this.$.spinner.hidden=!1;this.$.loadPackages.url=this.service;this.$.loadPackages.generateRequest()}_hideSpinner(){this.$.spinner.hidden=!0}_handleCount(){}}window.customElements.define(ExistdbPackages.is,ExistdbPackages);</script></dom-module></body></html>